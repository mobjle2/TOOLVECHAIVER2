<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tool Ve Chai V2 PRO</title>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#0f0f1a,#1a1033);
  color:white;
}
.container{max-width:1000px;margin:auto;padding:25px}
h2{text-align:center}

input{
  width:100%;
  padding:16px;
  border-radius:14px;
  border:1px solid #333;
  background:#111827;
  color:white;
  font-size:16px;
  margin-top:15px;
}

button{
  width:100%;
  padding:16px;
  border-radius:14px;
  border:none;
  background:linear-gradient(90deg,#2563eb,#7c3aed);
  color:white;
  font-weight:bold;
  font-size:16px;
  margin-top:15px;
  cursor:pointer;
  transition:0.2s;
}
button:hover{transform:scale(1.02)}

#out{
  margin-top:25px;
  display:grid;
  grid-template-columns:repeat(1,1fr);
  gap:18px;
}
@media(min-width:900px){
  #out{grid-template-columns:repeat(3,1fr)}
}

.item{
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(10px);
  padding:18px;
  border-radius:20px;
  border:1px solid rgba(255,255,255,0.1);
  transition:0.3s;
}
.item:hover{
  transform:translateY(-5px);
  box-shadow:0 0 25px rgba(124,58,237,0.4);
}

.badge{
  display:inline-block;
  padding:5px 12px;
  border-radius:999px;
  font-size:12px;
  margin-top:6px;
  margin-right:6px;
}

.mmc-badge{background:#0ea5e9;color:white}

/* VIP GLOW */
.vip-8{background:#7c3aed;box-shadow:0 0 20px #a855f7}
.vip-9{background:#06b6d4;box-shadow:0 0 20px #22d3ee}
.vip-10{background:#FFD700;color:black;box-shadow:0 0 25px gold}
.vip-11{background:#ff0000;box-shadow:0 0 25px red}
.vip-12{background:#990000;box-shadow:0 0 25px #ff0000}
.vip-13{background:#5b0000;box-shadow:0 0 30px red}
.vip-5{background:#facc15;color:black}
.vip-6{background:#fb923c}
.vip-7{background:#ef4444}

.adminBox{
  margin-top:30px;
  padding:20px;
  border-radius:20px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.1);
}
</style>
</head>
<body>

<div id="loginScreen" style="
position:fixed;
inset:0;
background:#000;
display:flex;
justify-content:center;
align-items:center;
z-index:9999;
">

  <div style="
    width:360px;
    background:#111;
    padding:30px;
    border-radius:20px;
    border:1px solid gold;
  ">

    <h2 style="text-align:center;color:gold;">üîê Admin V2</h2>

    <input id="loginEmail" type="email" placeholder="Gmail"
      style="width:100%;padding:14px;margin-top:15px;border-radius:12px;border:none;">

    <input id="loginPass" type="password" placeholder="Password"
      style="width:100%;padding:14px;margin-top:10px;border-radius:12px;border:none;">

    <button onclick="secureLogin()"
      style="width:100%;padding:14px;margin-top:15px;border:none;border-radius:12px;background:linear-gradient(90deg,#2563eb,#7c3aed);color:white;font-weight:bold;">
      LOGIN
    </button>

    <div id="loginError" style="color:red;text-align:center;margin-top:10px;"></div>

  </div>
</div>

<div class="container">
<h2>üöÄ Tool Ve Chai V2 PRO</h2>

<input id="q" placeholder="Nh·∫≠p 4 k√Ω t·ª± ho·∫∑c full m√£">
<button onclick="check()">CHECK</button>

<div id="adminPanel" class="adminBox" style="display:none;">
<h3>üîó Qu·∫£n l√Ω Link Th·ª£</h3>
<button onclick="createLink()">‚ûï T·∫°o Link</button>
<div id="linkList" style="margin-top:15px;"></div>
</div>

<div id="out"></div>
</div>

<script>
const firebaseConfig={
apiKey:"AIzaSyCEL7BDXvmNi2dp1VNpua7b2plpTiTOK3U",
authDomain:"toolvechai.firebaseapp.com",
projectId:"toolvechai"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();


const params=new URLSearchParams(window.location.search);
const userParam=params.get("u");

if(userParam) runUserMode(userParam);

async function runUserMode(id){
const doc=await db.collection("shareLinks_v2").doc(id).get();
if(!doc.exists||!doc.data().active){
document.body.innerHTML="üîí Link kh√¥ng h·ª£p l·ªá!";
return;
}
document.getElementById("loginScreen").remove();
auth.signOut();
}



const mmcMap={MMC1:"16G",MMC2:"32G",MMC3:"64G",MMC4:"128G",MMC5:"256G",MMC6:"512G"};

function detectChip(code){
code=code.toUpperCase();
if(code.startsWith("KM")) return "SAMSUNG";
if(code.startsWith("H")) return "SK hynix";
if(code.startsWith("JZ")) return "MICRON";
if(code.startsWith("THG")) return "KIOXIA";
if(code.startsWith("SD")) return "SANDISK";
return "UNKNOWN";
}

async function check(){
const key=q.value.toUpperCase().replace(/[^A-Z0-9]/g,"");
out.innerHTML="";
if(!key) return;
let results=new Map();

if(key.length===4){
const p=await db.collection("codes_v2").where("prefix4","==",key).get();
const s=await db.collection("codes_v2").where("suffix4","==",key).get();
p.forEach(d=>results.set(d.id,d.data()));
s.forEach(d=>results.set(d.id,d.data()));
}else{
const snap=await db.collection("codes_v2").where("search","==",key).get();
snap.forEach(d=>results.set(d.id,d.data()));
}

if(results.size===0){out.innerHTML="‚ùå Kh√¥ng x√°c ƒë·ªãnh m√£";return;}

results.forEach(x=>{
let vipClass="";
if(x.vip){vipClass="vip-"+x.vip.replace(/[^0-9]/g,"");}
out.innerHTML+=`
<div class="item">
<div style="font-weight:700;font-size:18px;">‚ö° ${x.code}</div>
<div class="badge">${detectChip(x.code)}</div>
${x.mmc?`<div class="badge mmc-badge">üíæ ${x.mmc} (${mmcMap[x.mmc]||""})</div>`:""}
${x.vip?`<div class="badge ${vipClass}">üëë ${x.vip}</div>`:""}
</div>
`;
});
}

/* ===== SHARE LINK ===== */
async function createLink(){
const id=Date.now().toString(36)+Math.random().toString(36).substr(2,4);
await db.collection("shareLinks_v2").doc(id).set({active:true});
alert("ƒê√£ t·∫°o link!");
loadLinks();
}

async function loadLinks(){
const snap=await db.collection("shareLinks_v2").get();
let html="";
snap.forEach(doc=>{
const d=doc.data();
html+=`
<div style="margin-bottom:12px;">
ID: ${doc.id}<br>
<button onclick="copyLink('${doc.id}')">Copy</button>
<button onclick="toggleLink('${doc.id}',${d.active})">
${d.active?"Kh√≥a":"M·ªü"}
</button>
<button onclick="deleteLink('${doc.id}')" style="background:red">X√≥a</button>
</div>`;
});
linkList.innerHTML=html;
}

function copyLink(id){
const link=window.location.origin+window.location.pathname+"?u="+id;
navigator.clipboard.writeText(link);
alert("ƒê√£ copy link!");
}

async function toggleLink(id,current){
await db.collection("shareLinks_v2").doc(id).update({active:!current});
loadLinks();
}

async function deleteLink(id){
await db.collection("shareLinks_v2").doc(id).delete();
loadLinks();
}
</script>
</body>
</html>
