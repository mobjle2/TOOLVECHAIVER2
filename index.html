<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tool Ve Chai V2</title>

<link rel="icon" href="data:,">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b0f1a;
  color:white;
}

.wrapper{
  max-width:900px;
  margin:auto;
  padding:40px 20px;
}

input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid #333;
  background:#111827;
  color:white;
  margin-bottom:10px;
}

button{
  padding:12px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
}

.login-btn{
  background:#2563eb;
  color:white;
}

.hidden{display:none;}

.badge{
  padding:6px 12px;
  border-radius:20px;
  font-size:13px;
}

.open{background:#16a34a;}
.closed{background:#dc2626;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginBox" style="max-width:400px;margin:120px auto;">
  <h2>Đăng nhập</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button class="login-btn" onclick="login()">ĐĂNG NHẬP</button>
  <div id="loginError" style="color:red;margin-top:10px;"></div>
</div>

<!-- MAIN -->
<div id="mainApp" class="wrapper hidden">
  <h1>Tool Ve Chai V2</h1>

  <input id="codeInput" placeholder="Nhập mã...">
  <button onclick="checkCode()">CHECK</button>
  <button onclick="logout()">Đăng xuất</button>

  <div id="checkResult" style="margin-top:15px;"></div>
</div>

<!-- FIREBASE v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyClXx0V66GQHKGO0EwQc0nYNguFLc705A0",
  authDomain: "toolvechaiver2.firebaseapp.com",
  projectId: "toolvechaiver2",
  storageBucket: "toolvechaiver2.firebasestorage.app",
  messagingSenderId: "855001765940",
  appId: "1:855001765940:web:0a562c54618377aaae5261"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();

const loginBox = document.getElementById("loginBox");
const mainApp = document.getElementById("mainApp");
const loginError = document.getElementById("loginError");
const checkResult = document.getElementById("checkResult");

/* AUTH STATE */
auth.onAuthStateChanged(function(user){
  if(user){
    loginBox.classList.add("hidden");
    mainApp.classList.remove("hidden");
  }else{
    loginBox.classList.remove("hidden");
    mainApp.classList.add("hidden");
  }
});

/* LOGIN */
function login(){
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  loginError.innerText = "";

  auth.signInWithEmailAndPassword(email, password)
    .catch(function(error){
      loginError.innerText = error.message;
    });
}

/* LOGOUT */
function logout(){
  auth.signOut();
}

/* CHECK */
function checkCode(){
  const code = document.getElementById("codeInput").value.trim();

  if(code.length < 4){
    checkResult.innerHTML = '<span class="badge closed">Mã không hợp lệ</span>';
  }else{
    checkResult.innerHTML = '<span class="badge open">Hợp lệ</span>';
  }
}
</script>

</body>
</html>
