<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Import Codes V2</title>
</head>
<body>
  <h2>Import Codes V2</h2>
  <button onclick="importCodes()">ðŸš€ Import Codes</button>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <script>
    // ðŸ”¥ Firebase config (Ä‘Ãºng project cá»§a báº¡n)
    const firebaseConfig = {
      apiKey: "AIzaSyClXx0V66GQHKGO0EwQc0nYNguFLc705A0",
      authDomain: "toolvechaiver2.firebaseapp.com",
      projectId: "toolvechaiver2",
      storageBucket: "toolvechaiver2.appspot.com",
      messagingSenderId: "855001765940",
      appId: "1:855001765940:web:0a562c54618377aaae5261"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ðŸ”½ DATA IMPORT (Sá»¬A CHá»– NÃ€Y)
    const DATA = [
      { code: "08-08-3CV100", type: "VIP", value: "VIP 1" },
      { code: "H26M52103FMR", type: "MMC", value: "MMC1" }
      // thÃªm code á»Ÿ Ä‘Ã¢y
    ];

    // ðŸ§  Chuáº©n hÃ³a mÃ£
    function normalize(code) {
      return code.toUpperCase().replace(/[^A-Z0-9]/g, "");
    }

    async function importCodes() {
      for (const item of DATA) {
        const full = normalize(item.code);
        const head4 = full.slice(0, 4);
        const tail4 = full.slice(-4);

        const docId = item.code; // doc.id = mÃ£ gá»‘c

        await db.collection("codes").doc(docId).set({
          code: item.code,
          full: full,
          head4: head4,
          tail4: tail4,
          type: item.type,
          value: item.value,
          used: "no",
          usedAt: "",
          usedBy: ""
        });

        console.log("Imported:", docId);
      }

      alert("âœ… Import xong codes V2");
    }
  </script>
</body>
</html>
